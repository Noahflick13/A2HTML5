(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{"4joU":function(e,t,r){"use strict";r.r(t);var o=r("mwIZ"),n=r.n(o),i=r("17x9"),a=r.n(i),c=r("q1tI"),s=r.n(c),u=r("g2ny"),l=r("/MKj"),p=r("ncDY"),f=r("LFu7"),b=r("zSSe"),d=r("ska2"),h=r("DPuV"),m=r("NaN6"),y=r("/uKD"),C=r("tKnm"),P=r("T2dD"),g=r("Vq3O"),O=r("peh1"),w=Object(O.createSelector)(function selectProExclusive(e){return e.proExclusive||{}},function(e){return e.courses||[]}),j=Object(O.createSelector)(w,function(e){return new Set(e)}),I=r("CcB0"),_=r("kmE8"),v=r("p67i"),x=r("sgEg");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var E=function handleProgramRedirect(e){var t=e.programId,r=e.programContentId;window.location=Object(h.K)(t,r)},S=function getRedirectQueryParams(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{programId:e.program_id,programContentId:e.program_content_id}},T={showModal:p.c,nextContentItemRequested:f.a,trackVisit:P.f},M=function(e){function CourseContentItem(){var e,t;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CourseContentItem);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=_possibleConstructorReturn(this,(e=_getPrototypeOf(CourseContentItem)).call.apply(e,[this].concat(o)))).navigateToExercise=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.props,n=o.dispatch,i=o.locationParams,a=o.locationQuery,c=g.c(_objectSpread({},i,{exerciseSlug:e,query:a}));r&&(c=Object(u.redirect)(c)),n(c)},t.redirectToProgramDashboard=function(){var e=S(t.props.locationQuery),r=e.programId,o=e.programContentId;return!(!r||!o)&&(E({programId:r,programContentId:o}),!0)},t.redirectToContainerCourse=function(){var e=t.props.locationQuery.course_redirect;return!!e&&(window.location.assign(Object(h.o)(e)),!0)},t.showNextContentInterstitial=function(){var e=t.props,r=e.hasNextContent,o=e.showProCourseCompletionInterstitial;if(!t.redirectToProgramDashboard())if(r||o)t.props.nextContentItemRequested({returnPath:t.returnPath()});else{if(t.redirectToContainerCourse())return;window.location.assign(t.returnPath())}},t.showProExclusiveInterstitial=function(){t.props.showModal({type:"ProExclusiveInterstitial",returnPath:t.returnPath()})},t.showModuleGateInterstitial=function(){t.props.showModal({type:"ModuleGateInterstitial",returnPath:t.returnPath()})},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CourseContentItem,c["Component"]),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(CourseContentItem,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.inModuleGatingExperiment,r=e.canAccessCurrentModule,o=e.hasCourseAccess;(function hasNoCourseInteraction(){return!!b.a.isPro()&&!window.localStorage.getItem("intercom.hasCourseInteraction")})()&&(window.localStorage.setItem("intercom.hasCourseInteraction",!0),Object(d.c)("hascourseinteraction")),t?r||this.showModuleGateInterstitial():o||this.showProExclusiveInterstitial()}},{key:"returnPath",value:function returnPath(){return n()(this.props.platformPage.exitPaths,"back",Object(h.r)())}},{key:"render",value:function render(){var e=this.props,t=e.inModuleGatingExperiment,r=e.canAccessCurrentModule,o=e.isProTrialActive,n=e.currentContentItem,i=e.platformPage,a=e.hasCourseAccess,u=_objectSpread({},this.props,{exitPaths:_objectSpread({},i.exitPaths,{back:this.returnPath()}),navigateToExercise:this.navigateToExercise,redirectToContainerCourse:this.redirectToContainerCourse,showNextContentInterstitial:this.showNextContentInterstitial}),l=I.c[n.type].component;if(t){if(!r)return s.a.createElement(x.a,null)}else if(!a)return s.a.createElement(x.a,null);return s.a.createElement(c.Fragment,null,s.a.createElement(l,u),o&&s.a.createElement(v.a,null))}}]),CourseContentItem}();M.propTypes={nextContentItems:a.a.object,hasNextContent:a.a.bool,currentCourse:a.a.object.isRequired,currentContentItem:a.a.object.isRequired,dispatch:a.a.func,locationType:a.a.string,locationQuery:a.a.object,locationParams:a.a.object,platformPage:a.a.object,showModal:a.a.func,isProTrialActive:a.a.bool,isProExclusiveCourse:a.a.bool,hasCourseAccess:a.a.bool,nextContentItemRequested:a.a.func,trackVisit:a.a.func,showProCourseCompletionInterstitial:a.a.bool,inModuleGatingExperiment:a.a.bool,canAccessCurrentModule:a.a.bool};t.default=Object(l.b)(function mapStateToProps(e){var t=Object(m.i)(e),r=j(e).has(t.slug),o=Object(C.f)(e),n=Object(C.t)(e),i=r&&o&&!n||!r;return{currentCourse:t,currentContentItem:Object(m.g)(e),nextContentItems:Object(m.m)(e),hasNextContent:Object(m.w)(e),proTrialFeatureActive:Object(_.a)(e).includes("pro_trial"),isProTrialExpired:Object(C.v)(e),isProTrialActive:Object(C.u)(e),inModuleGatingExperiment:Object(C.q)(e),canAccessCurrentModule:Object(m.e)(e),showProCourseCompletionInterstitial:Object(y.f)(e),hasCourseAccess:i}},T)(M)}}]);
//# sourceMappingURL=platform-scenes-courseContentItem.876182675e8b78ce9da3.chunk.js.map